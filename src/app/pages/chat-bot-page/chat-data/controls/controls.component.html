<div class="wrap" *ngIf="controls?.length">

  <!-- EL input-->
  <mat-form-field class="inputBlock simple" *ngIf="filterByType(controls, 'input')?.length">
    <input type="text" matInput class="input" (input)="onInput(controls[0], $event)" [name]="controls[0].control_text"
           [formControl]="inputValidation" [placeholder]="controls[0].control_text" required>
    <mat-error *ngIf="inputValidation.errors && inputValidation.touched && controls[0]?.validation_error_text">
      {{controls[0]?.validation_error_text}}
    </mat-error>
  </mat-form-field>

  <!-- El dropdown-->
  <mat-form-field appearance="fill" *ngIf="filterByType(controls, 'dropdown-item')?.length" class="mySelect drop">
    <mat-select placeholder="WÃ¤hle eins" (selectionChange)="onDrop($event)" [id]="controls[0].control_text"
                [aria-label]="controls[0].control_text"
                [formControl]="dropValidation">
      <mat-option *ngFor="let select of filterByType(controls, 'dropdown-item')" [value]="select">
        {{select.control_text}}
      </mat-option>
    </mat-select>
    <mat-error *ngIf="dropValidation.errors && dropValidation.touched && controls[0]?.validation_error_text">
      {{controls[0]?.validation_error_text}}
    </mat-error>
  </mat-form-field>

  <!-- El btn-group-->
  <div class="btn-group">
    <ng-container *ngFor="let btn of controls">
      <button mat-flat-button *ngIf="btn.control_type === 'outlined-button-item'"
              (click)="onOutlet(btn)">
        {{btn.control_text}}
      </button>
    </ng-container>
  </div>

  <!-- El circle-->
  <ng-container *ngFor="let btn of controls">
    <button mat-stroked-button class="circle" (click)="onSelectQuestion(btn)"
            *ngIf="btn.control_type === 'circle'" [disabled]="isControlDisabled(btn.id)"
    >
      {{btn.control_text}}
    </button>
  </ng-container>

  <!-- El btn-next-->
  <ng-container *ngFor="let btn of controls">
    <!--default-->
    <ng-container *ngIf="
     !filterByType(controls, 'input')?.length &&
     !filterByType(controls, 'dropdown-item')?.length &&
     !filterByType(controls, 'outlined-button-item')?.length">
      <button mat-stroked-button class="next" *ngIf="btn.control_type === 'button-next'" (click)="onSelect(btn)">
        <span>{{btn.control_text}}</span>
        <img src="assets/img/icons/arrow.svg" alt="arrow">
      </button>
    </ng-container>

    <!--if have input in controls-->
    <ng-container *ngIf="filterByType(controls, 'input')?.length">
      <button mat-stroked-button class="next" *ngIf="btn.control_type === 'button-next'"
              (click)="onInputNext(btn, filterByType(controls, 'input'))"
              [disabled]="!!inputValidation.errors"
      >
        <span>{{btn.control_text}}</span>
        <img src="assets/img/icons/arrow.svg" alt="arrow">
      </button>
    </ng-container>

    <!--if have dropdown in controls-->
    <ng-container *ngIf="filterByType(controls, 'dropdown-item')?.length">
      <button mat-stroked-button class="next" *ngIf="btn.control_type === 'button-next'"
              (click)="onDropNext(btn)"
              [disabled]="!!dropValidation.errors">
        <span>{{btn.control_text}}</span>
        <img src="assets/img/icons/arrow.svg" alt="arrow">
      </button>
    </ng-container>

    <!--if have outlet in controls-->
    <ng-container *ngIf="filterByType(controls, 'outlined-button-item')?.length">
      <button mat-stroked-button class="next" *ngIf="btn.control_type === 'button-next'"
              (click)="onOutletNext(btn)"
              [disabled]="!outletControl && outletRequired">
        <span>{{btn.control_text}}</span>
        <img src="assets/img/icons/arrow.svg" alt="arrow">
      </button>
    </ng-container>
  </ng-container>
</div>

<div class="wrap" *ngIf="!controls?.length"></div>
